<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Arun Baburaj â€” Photography</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/favicon.png" type="image/png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style data-page-style>
    html { visibility: hidden; overflow-y: scroll; }
    html.ready { visibility: visible; }

    :root{
      --bg:#f4f5f7;
      --text:#111219;
      --muted:#5b6066;
      --nav-gap:28px;
    }

    *{margin:0;padding:0;box-sizing:border-box}

    body{
      background:var(--bg);
      font-family:Inter,-apple-system,system-ui;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden; 
    }

    .page-top-border{height:3px;background:rgba(0,0,0,0.08)}

    header{
      display:flex;
      justify-content:center;
      border-bottom:1px solid rgba(0,0,0,0.06);
      background:rgba(244,245,247,0.96);
      backdrop-filter:blur(10px);
      flex-shrink: 0;
      z-index: 50;
      padding-bottom: 1px; 
    }

    .nav{
      max-width:640px;
      width:100%;
      display:flex;
      gap:var(--nav-gap);
      padding:20px 16px;
      font-size:15px;
      font-weight:600;
      white-space:nowrap;
    }

    .nav a{
      color:var(--muted);
      padding-bottom:2px;
      border-bottom:2px solid transparent;
      text-decoration:none;
    }

    .nav a.active{
      color:var(--text);
      border-bottom-color:var(--text);
    }

    main{
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      padding-bottom: 60px; 
      position: relative;
    }

    /* === FRAME CSS === */
    .photo-frame {
      display: flex;
      flex-direction: column; 
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
      position: relative; 
      cursor: ew-resize; 
      user-select: none;
      -webkit-user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform 0.05s ease-out;
    }

    .photo-frame:active {
      transform: scale(0.99);
      opacity: 0.95;
    }

    .photo-frame img {
      max-height: calc(100vh - 260px);
      max-width: 90vw;
      object-fit: contain; 
      border-radius: 4px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      transition: opacity 0.15s ease-out, transform 0.15s ease-out;
      opacity: 1; 
      pointer-events: none; 
    }

    /* Loading state for transitions */
    .photo-frame img.loading {
      opacity: 0.7; 
      transform: scale(0.995);
    }

    .caption-container {
      margin-top: 22px;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .location-caption {
      color: var(--muted);
      font-size: 14px;
      font-weight: 500;
      letter-spacing: 0.01em;
      pointer-events: none;
    }

    .date-caption {
      color: var(--muted);
      font-size: 12px;
      font-weight: 400;
      pointer-events: none;
      filter: opacity(0.7); 
    }

    .caption-hint {
      margin-top: 12px; 
      font-size: 11px;
      color: #999;
      opacity: 0.6;
      transition: opacity 0.3s ease;
      pointer-events: none; 
    }

    .social-fixed{
      position: fixed;
      bottom: 28px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 28px;
      z-index: 40;
    }

    .social-fixed a{color:#000;}
  </style>

  <script>document.documentElement.classList.add("ready");</script>
</head>

<body>
  <div class="page-top-border"></div>

  <header>
    <nav class="nav">
      <a href="/" data-spa>Index</a>
      <a href="/portfolio/" data-spa>Portfolio</a>
      <a href="/bookshelf/" data-spa>Bookshelf</a>
      <a href="/principles/" data-spa>Principles</a>
      <a href="/photography/" class="active" data-spa>Photography</a>
    </nav>
  </header>

  <main id="app">
    <div class="photo-frame" id="photo-frame-container">
      
      <img 
        id="main-photo" 
        src="https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963841/IMG_4430_ykc7eh.heic" 
        data-index="0" 
        alt="Photography"
      >

      <div class="caption-container">
        <div id="location-text" class="location-caption">
          Paris, France
        </div>
        <div id="date-text" class="date-caption">
          March 2025
        </div>
      </div>

      <div id="instruction-hint" class="caption-hint">
        (Arrow keys or Click sides to navigate)
      </div>

    </div>
  </main>

  <div class="social-fixed">
    <a href="https://www.linkedin.com/in/arunbaburaj" target="_blank"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM.5 8h4V24h-4V8zm7.98 0h3.83v2.16h.05c.53-1 1.84-2.16 3.79-2.16 4.05 0 4.8 2.67 4.8 6.14V24h-4v-8.16c0-1.95-.03-4.45-2.71-4.45-2.71 0-3.13 2.12-3.13 4.31V24h-4V8z"/></svg></a>
    <a href="https://x.com/96Arun" target="_blank"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2h3.314l-7.26 8.3L24 22h-6.828l-5.343-7.027L5.463 22H2.148l7.78-8.888L0 2h6.828l4.973 6.533L18.244 2zm-1.157 18h1.843L7.08 4h-1.89l11.897 16z"/></svg></a>
    <a href="mailto:arunbaburajc@gmail.com"><svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg></a>
  </div>

  <script>
    (function() {
      // DATA
      const photos = [
        // PARIS
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963841/IMG_4430_ykc7eh.heic', loc: 'Paris, France', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963840/IMG_5271_inc2jg.heic', loc: 'Montmartre, Paris', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963839/IMG_5506_obeji0.heic', loc: 'Eiffel Tower, Paris', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963839/IMG_5419_tjcvau.heic', loc: 'Jardin des Tuileries, Paris', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963841/IMG_4714_r6ltis.heic', loc: 'Notre-Dame Cathedral, Paris', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963840/IMG_4804_qv8n6j.heic', loc: 'Paris, France', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963839/IMG_5361_jpxu89.heic', loc: 'Paris, France', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963839/IMG_5192_rahvfy.heic', loc: 'Paris, France', date: 'March 2025' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765963839/IMG_5145_fiiz2o.heic', loc: 'Arc de Triomphe, Paris', date: 'March 2025' },
        // JAPAN
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954649/IMG_0846_t8d23u.heic', loc: 'Tokyo, Japan', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954652/IMG_0482_svs8vc.heic', loc: 'Tokyo, Japan', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954651/IMG_1002_szjm3u.heic', loc: 'Osaka, Japan', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954651/IMG_0493_wpmeil.heic', loc: 'Kabukicho, Shinjuku', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954650/IMG_1012_rwnger.heic', loc: 'Osaka, Japan', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954650/IMG_1022_hamz6c.heic', loc: 'Osaka, Japan', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954648/IMG_1880_ae5ler.heic', loc: 'Asakusa, Tokyo', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954648/IMG_1093_uhazzm.heic', loc: 'Osaka Castle, Osaka', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954648/IMG_1593_iy262h.heic', loc: 'Kinkaku-ji, Kyoto', date: 'Sep 2024' },
        { url: 'https://res.cloudinary.com/dp67k01qy/image/upload/f_auto,q_auto/v1765954648/IMG_1286_oiapzo.heic', loc: 'Kyoto, Japan', date: 'Sep 2024' }
      ];

      // GLOBAL HELPERS
      // We look up elements dynamically because SPA replaces them
      const getEls = () => ({
        container: document.getElementById('photo-frame-container'),
        img: document.getElementById('main-photo'),
        loc: document.getElementById('location-text'),
        date: document.getElementById('date-text'),
        hint: document.getElementById('instruction-hint')
      });

      // CORE UPDATE LOGIC
      function navigateGallery(direction) {
        const els = getEls();
        if (!els.img) return; // Not on photography page

        // Get current index from DOM to stay in sync
        let currentIdx = parseInt(els.img.getAttribute('data-index') || '0');
        
        // Calculate new index
        let newIdx;
        if (direction === 'next') {
          newIdx = (currentIdx + 1) % photos.length;
        } else {
          newIdx = (currentIdx - 1 + photos.length) % photos.length;
        }

        // Hide Hint
        if (els.hint && els.hint.style.display !== 'none') {
          els.hint.style.display = 'none';
        }

        // Animate
        els.img.classList.add('loading');

        setTimeout(() => {
          const photo = photos[newIdx];
          els.img.src = photo.url;
          els.img.setAttribute('data-index', newIdx); // Update State in DOM
          els.loc.innerText = photo.loc;
          els.date.innerText = photo.date;

          // Fade In
          els.img.onload = () => els.img.classList.remove('loading');
          setTimeout(() => els.img.classList.remove('loading'), 50);

          // Preload Next
          const preloadIdx = (newIdx + 1) % photos.length;
          new Image().src = photos[preloadIdx].url;
        }, 150);
      }

      // --- EVENT DELEGATION (SAFE FOR SPA) ---
      
      // 1. Keyboard
      document.addEventListener('keydown', (e) => {
        // Check if we are actually on the photo page by looking for the element
        if (!document.getElementById('main-photo')) return;

        if (e.key === 'ArrowRight') navigateGallery('next');
        if (e.key === 'ArrowLeft') navigateGallery('prev');
      });

      // 2. Clicks (Delegated to Document)
      document.addEventListener('click', (e) => {
        const container = e.target.closest('#photo-frame-container');
        if (!container) return; // Click wasn't on our frame

        const rect = container.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        
        // Left 30% = Prev, Right = Next
        if (clickX < rect.width * 0.3) {
          navigateGallery('prev');
        } else {
          navigateGallery('next');
        }
      });

      // 3. Swipe (Delegated to Document)
      let touchStartX = 0;
      document.addEventListener('touchstart', (e) => {
        if (!e.target.closest('#photo-frame-container')) return;
        touchStartX = e.changedTouches[0].screenX;
      }, {passive: true});

      document.addEventListener('touchend', (e) => {
        if (!e.target.closest('#photo-frame-container')) return;
        const touchEndX = e.changedTouches[0].screenX;
        const diff = touchStartX - touchEndX;

        if (Math.abs(diff) > 50) {
          if (diff > 0) navigateGallery('next');
          else navigateGallery('prev');
        }
      }, {passive: true});

    })();
  </script>

  <script src="/spa-nav.js"></script>
</body>
</html>
