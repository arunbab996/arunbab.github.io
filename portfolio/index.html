<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Arun Baburaj — Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/favicon.png" type="image/png">

  <!-- Inline critical CSS to avoid FOUC on initial paint (background, nav, font fallback) -->
  <style>
    :root{ --bg:#dbe2eb; --text:#111219; --muted:#5b6066; --max-width:1200px; --nav-gap:28px; }
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: Inter, -apple-system, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    header{ display:flex; justify-content:center; border-bottom:1px solid rgba(0,0,0,0.06); width:100%;}
    .nav{ max-width:var(--max-width); width:100%; display:flex; justify-content:flex-start; padding:20px 16px; gap:var(--nav-gap); font-weight:600; color:var(--muted); margin:0 auto; font-size:15px;}
    .nav a{ color:var(--muted); text-decoration:none; padding-bottom:2px; border-bottom:2px solid transparent;}
    .nav a.active{ color:var(--text); border-bottom-color:var(--text); }
    /* hide global footer if it's injected (we kept Option 1) */
    .social-fixed { display: none !important; }
    /* hide content area until JS reveals it (prevents FOUC on navigation) */
    .page-enter { visibility:hidden; opacity:0; }
  </style>

  <!-- Page styles (kept from your previous file) -->
  <style data-page-style>
    *{box-sizing:border-box}
    main{ max-width:1200px; margin:48px auto; padding:0 16px; }
    .page-top-border{ height:3px; background:rgba(0,0,0,0.08); }
    .page-title{ font-weight:700; font-size:18px; margin-bottom:18px; display:flex; justify-content:space-between; align-items:center;}
    .two-col{ display:grid; grid-template-columns:64% 34%; gap:28px; }
    .projects-grid{ display:flex; flex-direction:column; gap:18px; }
    .project-card{ display:flex; align-items:center; gap:18px; text-decoration:none; color:var(--text); background:rgba(255,255,255,0.03); border:1px solid rgba(0,0,0,0.03); border-radius:8px; padding:8px; transition:transform .18s ease, box-shadow .18s ease; }
    .project-card:hover{ transform:translateY(-6px); box-shadow:0 10px 30px rgba(16,24,40,0.12); }
    .project-card img{ width:220px; height:140px; object-fit:cover; border-radius:6px; transition:transform .18s ease, opacity .18s ease; }
    .project-card:hover img{ transform:scale(1.03); opacity:0.95; }
    .project-meta{ padding:6px; }
    .project-title{ font-weight:700; margin-bottom:6px; }
    .project-tagline{ color:var(--muted); font-size:14px; }
    .tools-col{ display:flex; flex-direction:column; gap:16px; }
    .tool-header{ font-weight:700; font-size:16px; margin-bottom:4px; }
    .tool-card{ display:flex; gap:14px; border-radius:10px; background:rgba(255,255,255,0.03); border:1px solid rgba(0,0,0,0.04); padding:12px; text-decoration:none; color:var(--text); transition:transform .16s ease, box-shadow .16s ease; }
    .tool-card:hover{ transform:translateY(-6px); box-shadow:0 10px 30px rgba(16,24,40,0.12); }
    .tool-thumb{ width:120px; height:90px; object-fit:cover; border-radius:6px; }
    .tool-title{ font-weight:700; margin-bottom:4px; font-size:15px; }
    .tool-sub{ color:var(--muted); font-size:13px; line-height:1.3; }

    /* enter animation */
    .page-enter > *{ opacity:0; transform:translateY(6px); transition:opacity .3s ease-out, transform .3s ease-out;}
    .page-enter.page-enter-active > *{ opacity:1; transform:translateY(0); }

    /* loading overlay styles */
    #__nav-loader {
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(255,255,255,0.6);
      backdrop-filter: blur(3px);
      z-index:9999;
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease;
    }
    #__nav-loader.visible { opacity:1; pointer-events:auto; }
    .loader-dot{ width:10px; height:10px; border-radius:50%; background:#111; margin:6px; animation:bounce .9s infinite ease-in-out;}
    .loader-dot:nth-child(2){ animation-delay:.12s }
    .loader-dot:nth-child(3){ animation-delay:.24s }
    @keyframes bounce { 0%,100%{ transform:translateY(0); } 50%{ transform:translateY(-8px);} }

    @media(max-width:900px){
      .two-col{ grid-template-columns:1fr; }
      .project-card img{ width:100%; height:180px; }
      .tool-thumb{ width:100px; height:80px; }
    }
  </style>

  <!-- noscript fallback: show content if JS is disabled -->
  <noscript>
    <style>.page-enter { visibility:visible; opacity:1; } .social-fixed{display:none!important;}</style>
  </noscript>
</head>

<body>
  <div class="page-top-border"></div>

  <header>
    <nav class="nav">
      <a href="/" data-spa>Index</a>
      <a href="/portfolio" class="active" data-spa>Portfolio</a>
      <a href="/bookshelf/" data-spa>Bookshelf</a>
      <a href="/principles" data-spa>Principles</a>
    </nav>
  </header>

  <main id="app">
    <!-- main content area (we'll replace only this .page-enter on SPA nav) -->
    <div class="page-enter" id="content-root">
      <div class="page-title"><span>Portfolio</span></div>

      <div class="two-col">
        <div class="projects-grid">
          <a href="/portfolio/specter/" class="project-card" data-spa>
            <img src="/images/0.webp" alt="Specter Talent">
            <div class="project-meta">
              <div class="project-title">Specter Talent</div>
              <div class="project-tagline">Building the founder discovery engine powering modern startup scouting.</div>
            </div>
          </a>

          <a href="/portfolio/dunzo/" class="project-card" data-spa>
            <img src="/images/1.webp" alt="Dunzo">
            <div class="project-meta">
              <div class="project-title">Dunzo: Increasing the Average Order Value</div>
              <div class="project-tagline">The Tale of Maximising AOV</div>
            </div>
          </a>

          <a href="/portfolio/jupiter/" class="project-card" data-spa>
            <img src="/images/2.webp" alt="Jupiter Gamification">
            <div class="project-meta">
              <div class="project-title">Jupiter - App Gamification</div>
              <div class="project-tagline">An attempt to incorporate game elements to Jupiter - a Neobank.</div>
            </div>
          </a>

          <a href="/portfolio/swiggy/" class="project-card" data-spa>
            <img src="/images/3.jpeg" alt="Swiggy">
            <div class="project-meta">
              <div class="project-title">Swiggy - How to Tackle Multiple Orders?</div>
              <div class="project-tagline">Solving Bulk Delivery - i.e Food orders from multiple restaurants at multiple times.</div>
            </div>
          </a>
        </div>

        <div class="tools-col">
          <div class="tool-header">Tools</div>

          <a href="https://btc.heyabc.xyz" class="tool-card" target="_blank" rel="noopener">
            <img class="tool-thumb" src="/images/bitcoin.webp" alt="">
            <div>
              <div class="tool-title">Monitoring Magic Internet Money</div>
              <div class="tool-sub">Real-time BTC tools, charts, and utilities.</div>
            </div>
          </a>

          <a href="https://ycombinator-winter2026.vercel.app" class="tool-card" target="_blank" rel="noopener">
            <img class="tool-thumb" src="/images/DOS.png" alt="">
            <div>
              <div class="tool-title">DiscoveryOS</div>
              <div class="tool-sub">Market intelligence on emerging companies.</div>
            </div>
          </a>

          <a href="https://x.com/YCDiscoveryBot" class="tool-card" target="_blank" rel="noopener">
            <img class="tool-thumb" src="/images/Y_Combinator_logo(1).png" alt="">
            <div>
              <div class="tool-title">Y Combinator Bot</div>
              <div class="tool-sub">Posts updates whenever a new YC startup is listed.</div>
            </div>
          </a>

          <a href="https://voyager-umber.vercel.app" class="tool-card" target="_blank" rel="noopener">
            <img class="tool-thumb" src="/images/voya.png" alt="">
            <div>
              <div class="tool-title">Voyager</div>
              <div class="tool-sub">Your AI Travel Concierge.</div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </main>

  <!-- loader overlay shown during SPA fetch/navigation -->
  <div id="__nav-loader" aria-hidden="true" role="status" title="Loading">
    <div class="loader-dot"></div>
    <div class="loader-dot"></div>
    <div class="loader-dot"></div>
  </div>

  <!-- SPA navigation + safe replace script -->
  <script>
    (function () {
      const contentRoot = document.getElementById('content-root');
      const loader = document.getElementById('__nav-loader');

      function showLoader() { loader.classList.add('visible'); }
      function hideLoader() { loader.classList.remove('visible'); }

      // Reveal the initial content safely (prevents FOUC on first render)
      function initialReveal() {
        // small delay to let fonts/styles apply
        requestAnimationFrame(() => {
          document.querySelector('.page-enter')?.classList.add('page-enter-active');
          document.querySelector('.page-enter').style.visibility = 'visible';
        });
      }

      // Replace contentRoot with fetched page's .page-enter content
      async function loadAndReplace(href, pushState = true) {
        try {
          showLoader();

          // fetch the target page as text
          const res = await fetch(href, { cache: 'no-store' });
          if (!res.ok) throw new Error('Network error');

          const html = await res.text();
          // parse response and extract the .page-enter element
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const newContent = doc.querySelector('.page-enter');

          if (!newContent) {
            // fallback: do a full navigation if fetched page doesn't contain expected structure
            window.location.href = href;
            return;
          }

          // Prepare old content to be removed only after new is ready
          // hide current content while we swap to avoid flash
          document.querySelector('.page-enter').style.visibility = 'hidden';
          // Insert new content into a temporary container to let images start loading
          const temp = document.createElement('div');
          temp.style.visibility = 'hidden';
          temp.appendChild(newContent.cloneNode(true));
          document.body.appendChild(temp);

          // Wait a frame to allow styles to apply to temp subtree
          await new Promise(requestAnimationFrame);

          // Swap the contentRoot's innerHTML with newContent's innerHTML
          contentRoot.innerHTML = newContent.innerHTML;

          // Clean up the temp container
          document.body.removeChild(temp);

          // Update active nav link
          updateActiveNav(href);

          // reveal with animation
          contentRoot.style.visibility = 'visible';
          requestAnimationFrame(() => {
            contentRoot.classList.add('page-enter-active');
          });

          // update history
          if (pushState) history.pushState({ spa: true }, '', href);

        } catch (err) {
          console.error('SPA nav failed, falling back to full navigation', err);
          window.location.href = href;
        } finally {
          // small delay so loader doesn't flicker too quickly
          setTimeout(hideLoader, 180);
        }
      }

      function updateActiveNav(href) {
        const navLinks = document.querySelectorAll('.nav a[data-spa]');
        navLinks.forEach(a => {
          try {
            const linkPath = new URL(a.href, location.origin).pathname;
            a.classList.toggle('active', linkPath === new URL(href, location.origin).pathname);
          } catch(e) { /* ignore invalid URLs */ }
        });
      }

      // delegate clicks for SPA links (links with data-spa)
      document.addEventListener('click', function (e) {
        // Find closest anchor
        const a = e.target.closest('a[data-spa]');
        if (!a) return;

        // Ignore modifier clicks (open in new tab etc)
        if (e.button !== 0 || e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;

        const href = a.getAttribute('href');
        if (!href || href.startsWith('http') && !href.startsWith(location.origin)) {
          // external link — let it through
          return;
        }

        // intercept and do SPA fetch & replace
        e.preventDefault();
        loadAndReplace(href, true);
      });

      // handle browser navigation (back/forward)
      window.addEventListener('popstate', function () {
        // On popstate, load the current location via SPA method (no pushState)
        loadAndReplace(location.pathname + location.search + location.hash, false);
      });

      // reveal initial page
      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        initialReveal();
      } else {
        document.addEventListener('DOMContentLoaded', initialReveal);
        window.addEventListener('load', initialReveal);
      }
    })();
  </script>
</body>
</html>
